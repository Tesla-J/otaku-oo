<!DOCTYPE html>
<html>
<head>
    <title>Otaku king - Home</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="view/support/css/landing_page.css" />
    <link rel="stylesheet" href="view/support/css/home.css" />
    <!-- Font awesome -->
    <link rel="stylesheet" href="view/support/css/font-awesome/css/font-awesome.min.css" />
</head>

<body>
    <!-- Dialog box to post new topics -->
    <section class="dialog-blur">
        <dialog id="new_post_dialog">
            <div>
                <button id="close_button">X</button>
            </div>
            <form action="/post/new" method="post">
                <label for="title">Title:</label>
                <input id="title" name="title" required/>
                <br>
                <label for="content">Content:</label>
                <textarea id="content" name="content" type="email" required></textarea>
                <br>
                <input type="submit" value="Post"/>
                <input type="reset" value="Clear" />
                <br>
            </form>
        </dialog>
    <section>

    <div class="container">
        <!-- Side nav -->
        <? (new Controller)->renderView('side_nav', [], false) ?>

        <button class="new-post-button fa fa-plus" id="open_button"></button>
        <script type="text/javascript" src="/view/support/js/dialog.js"></script>

        <!-- Feed -->
        <div style="flex: 3; width: 100%">
            <main class="main">
                <?php foreach($args as $postDTO): ?>
                    <section class="post-section">
                        <? $postData = $postDTO->toArray() ?>
                        <div class="post-header">
                            <figure>
                                <img class="author-profile-picture" alt="Profile picture" src="view/support/images/profile_picture_example.jpg" />
                            </figure>
                            <a href="#"><?= "@" . $_SESSION['username'] ?></a>
                            <details class="management-options">
                                <summary></summary>
                                <ul>
                                    <li>Edit</li>
                                    <li>Delete</li>
                                </ul>
                            </select>
                        </div>
                        <h2 class="post-title"><?= $postData['title'] ?></h2>
                        <p class="post-content"><?= $postData['content'] ?></p>
                        <br>
                        <!-- Post reactions -->
                        <ul class="action-list">
                            <li class="action-item">
                                <a href="#" class="action-link">
                                    <i class="fa fa-heart action-icon"></i>
                                </a>
                            </li>
                            <li class="action-item">
                                <a href="#" class="action-link">
                                    <i class="fa fa-comment"></i>
                                </a>
                            </li>
                            <li class="action-item">
                                <a href="#" class="action-link">
                                    <i class="fa fa-share"></i>
                                </a>
                            </li>
                        </ul>
                    </section>
                    <br>
                <?php endforeach ?>
            </main>
        </div>
    </div>
</body>

</html>